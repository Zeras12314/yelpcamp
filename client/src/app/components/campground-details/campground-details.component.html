<section class="container my-5 text-light">
  @if (campground$ | async; as camp) {
  <div class="row g-4">

    <!-- LEFT -->
    <div class="col-lg-6">
      <div class="bg-glass">

        @if(imageLoading) {
        <div class="loader-overlay">
          <div class="spinner-border text-warning"></div>
        </div>
        }

        @if(camp.images && camp.images.length > 0) {
        <div id="campCarousel" class="carousel slide">
          <div class="carousel-inner">
            @for(img of camp.images; track $index) {
            <div class="carousel-item" [ngClass]="{ 'active': $index === 0 }">
              <img [src]="img.url" [alt]="camp.title + ' image ' + ($index + 1)" (load)="imageLoading = false"
                (error)="imageLoading = false" />
            </div>
            }
          </div>

          @if(camp.images.length > 1){
          <div class="carousel-control-container">
            <button class="carousel-control-prev flame-control" type="button" data-bs-target="#campCarousel"
              data-bs-slide="prev">
            </button>
            <button class="carousel-control-next flame-control" type="button" data-bs-target="#campCarousel"
              data-bs-slide="next">
            </button>
          </div>
          }
        </div>
        }

        <!-- CONTENT -->
        <div class="camp-body">
          <h3 class="camp-title">{{ camp.title }}</h3>
          <p class="camp-desc">{{ camp.description }}</p>

          <div class="camp-meta">
            <span class="meta flame">üî• ${{ camp.price }}/night</span>
            <span class="meta">üìç {{ camp.location }}</span>
            <span class="meta muted">by {{ camp?.author?.username }}</span>
          </div>
        </div>

        @if(isCampOwner){
        <div class="camp-actions">
          <button class="btn-card" (click)="editCampground(camp._id)">
            Edit
          </button>

          <button class="btn-card delete" (click)="openDialog(camp._id)">
            Delete
          </button>
        </div>
        }

        <div class="back-link" (click)="goBack()">
          Back to Campgrounds
        </div>

        <div class="camp-footer">
          {{daysAgo}} days ago
        </div>

      </div>
    </div>

    <!-- RIGHT -->
    <div class="col-lg-6">
      @if (campground$ | async; as campground) {
      <app-campground-map [campground]="campground"></app-campground-map>
      }
      <app-reviews [campground]="campground$ | async" [campId]="campId()">
      </app-reviews>
    </div>

  </div>
  }
</section>